<nav dir="rtl"
    class="bg-white/95 backdrop-blur-sm border-b border-slate-200 flex items-center justify-between h-16 px-6 fixed top-0 w-full z-50">

    <!-- Left Section: Logo & Title -->
    <div class="flex items-center gap">
        <a class="w-fit" routerLink="/intro">
            <img src="/imgs/LogoZakah.png" alt="ZakahCalc Logo" class="h-24 w-auto">
        </a>
        <a class="w-fit" routerLink="/intro">
            <h1 class="text-xl font-bold text-slate-800 hidden sm:block">
                حاسبة الزكاة
            </h1>
        </a>
    </div>

    <!-- Desktop Navigation -->
    <ul class="hidden md:flex items-center space-x-1">
        <li routerLink="/intro" routerLinkActive=" bg-slate-200 text-slate-900"
            class="flex items-center gap-2 px-3 sm:px-2 py-2 rounded-lg text-sm font-medium transition-colors hover:bg-slate-200 cursor-pointer">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 shrink" fill="none" viewBox="0 0 24 24"
                stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M13 10V3L4 14h7v7l9-11h-7z" />
            </svg>

            <a routerLinkActive=" text-slate-900" class="nav-btn">مقدمة</a>
        </li>
        <li routerLink="/dashboard" routerLinkActive=" bg-slate-200 text-slate-900"
            class="flex items-center gap-2 px-3 sm:px-4 py-2 rounded-lg text-sm font-medium transition-colors hover:bg-slate-200 cursor-pointer">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 shrink" viewBox="0 0 640 640">
                <path
                    d="M128 128C128 110.3 113.7 96 96 96C78.3 96 64 110.3 64 128L64 464C64 508.2 99.8 544 144 544L544 544C561.7 544 576 529.7 576 512C576 494.3 561.7 480 544 480L144 480C135.2 480 128 472.8 128 464L128 128zM534.6 214.6C547.1 202.1 547.1 181.8 534.6 169.3C522.1 156.8 501.8 156.8 489.3 169.3L384 274.7L326.6 217.4C314.1 204.9 293.8 204.9 281.3 217.4L185.3 313.4C172.8 325.9 172.8 346.2 185.3 358.7C197.8 371.2 218.1 371.2 230.6 358.7L304 285.3L361.4 342.7C373.9 355.2 394.2 355.2 406.7 342.7L534.7 214.7z" />
            </svg>
            <a class="nav-btn">لوحة التحكم</a>
        </li>
        <li routerLink="/wizard" routerLinkActive=" bg-slate-200 text-slate-900"
            class="flex items-center gap-2 px-3 sm:px-4 py-2 rounded-lg text-sm font-medium transition-colors hover:bg-slate-200 cursor-pointer">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 shrink" fill="none" viewBox="0 0 24 24"
                stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round"
                    d="M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
            <a class="nav-btn">حساب جديد</a>
        </li>
        <li routerLink="/guide" routerLinkActive=" bg-slate-200 text-slate-900"
            class="flex items-center gap-2 px-3 sm:px-4 py-2 rounded-lg text-sm font-medium transition-colors hover:bg-slate-200 cursor-pointer">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 shrink" fill="none" viewBox="0 0 24 24"
                stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round"
                    d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" />
            </svg>
            <a class="nav-btn">دليل الزكاة</a>
        </li>
    </ul>

    <!-- Mobile Hamburger -->
  <div class="relative hidden md:block" 
     #profileMenu 
     appClickOutside 
     (clickOutside)="isProfileMenuOpen.set(false)">
     
    <a (click)="toggleProfileMenu($event) "
       class="flex items-center gap-3 border rounded-full p-2 hover:bg-slate-100 transition-colors hover:cursor-pointer hover:border-emerald-400">
        <div class="text-start">
            <p class="text-sm font-semibold text-slate-800">{{name}}</p>
            <p class="text-xs text-slate-500">{{ type }}</p>
        </div>
        <svg class="h-4 w-4 text-slate-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
        </svg>
    </a>

    @if (isProfileMenuOpen()) {
    <div class="absolute left-0 mt-2 w-40 p-2 rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 z-50">
        <div class="p-1">
            <a routerLink="/profile" (click)="closeMenu()"
               class="dropdown-item rounded-full hover:bg-slate-200 p-1">ملفك الشخصي</a>
        </div>
        <div class="p-1">
            <a (click)="logout()" routerLink=""
               class="dropdown-item text-red-600 hover:bg-red-50 p-1 rounded-full">تسجيل الخروج</a>
        </div>
    </div>
    }
</div>